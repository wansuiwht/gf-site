"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["49534"],{109640:function(n,e,r){r.r(e),r.d(e,{metadata:()=>t,contentTitle:()=>d,default:()=>h,assets:()=>l,toc:()=>s,frontMatter:()=>o});var t=JSON.parse('{"id":"\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61","title":"TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61","description":"gtcp \u6A21\u5757\u63D0\u4F9B\u4E86\u7B80\u4FBF\u6613\u7528\u7684 gtcp.Conn \u94FE\u63A5\u64CD\u4F5C\u5BF9\u8C61\u3002","source":"@site/versioned_docs/version-2.4.x/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61.md","sourceDirName":"\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61","slug":"/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/","permalink":"/en/2.4.x/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.4.x/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61.md","tags":[],"version":"2.4.x","lastUpdatedBy":"John","lastUpdatedAt":1730365530000,"sidebarPosition":0,"frontMatter":{"title":"TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61","sidebar_position":0,"hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"TCP\u7EC4\u4EF6","permalink":"/en/2.4.x/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/"},"next":{"title":"\u8FDE\u63A5\u5BF9\u8C61-\u6D88\u606F\u5305\u5904\u7406","permalink":"/en/2.4.x/\u7F51\u7EDC\u670D\u52A1\u5F00\u53D1/TCP\u7EC4\u4EF6/TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61/\u8FDE\u63A5\u5BF9\u8C61-\u6D88\u606F\u5305\u5904\u7406"}}'),c=r("785893"),i=r("250065");let o={title:"TCP\u7EC4\u4EF6-\u8FDE\u63A5\u5BF9\u8C61",sidebar_position:0,hide_title:!0},d=void 0,l={},s=[{value:"\u5199\u5165\u64CD\u4F5C",id:"\u5199\u5165\u64CD\u4F5C",level:2},{value:"\u8BFB\u53D6\u64CD\u4F5C",id:"\u8BFB\u53D6\u64CD\u4F5C",level:2},{value:"\u8D85\u65F6\u5904\u7406",id:"\u8D85\u65F6\u5904\u7406",level:2},{value:"\u4F7F\u7528\u793A\u4F8B",id:"\u4F7F\u7528\u793A\u4F8B",level:2},{value:"\u793A\u4F8B1\uFF0C\u7B80\u5355\u4F7F\u7528",id:"\u793A\u4F8B1\u7B80\u5355\u4F7F\u7528",level:3},{value:"\u793A\u4F8B2\uFF0C\u56DE\u663E\u670D\u52A1",id:"\u793A\u4F8B2\u56DE\u663E\u670D\u52A1",level:3},{value:"\u793A\u4F8B3\uFF0CHTTP\u5BA2\u6237\u7AEF",id:"\u793A\u4F8B3http\u5BA2\u6237\u7AEF",level:3}];function a(n){let e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"gtcp"})," \u6A21\u5757\u63D0\u4F9B\u4E86\u7B80\u4FBF\u6613\u7528\u7684 ",(0,c.jsx)(e.code,{children:"gtcp.Conn"})," \u94FE\u63A5\u64CD\u4F5C\u5BF9\u8C61\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"\u4F7F\u7528\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'import "github.com/gogf/gf/v2/net/gtcp"\n'})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"\u63A5\u53E3\u6587\u6863"}),"\uFF1A"]}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gtcp",children:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gtcp"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:"type Conn\n    func NewConn(addr string, timeout ...int) (*Conn, error)\n    func NewConnByNetConn(conn net.Conn) *Conn\n    func NewConnKeyCrt(addr, crtFile, keyFile string) (*Conn, error)\n    func NewConnTLS(addr string, tlsConfig *tls.Config) (*Conn, error)\n    func (c *Conn) Close() error\n    func (c *Conn) LocalAddr() net.Addr\n    func (c *Conn) Recv(length int, retry ...Retry) ([]byte, error)\n    func (c *Conn) RecvLine(retry ...Retry) ([]byte, error)\n    func (c *Conn) RecvWithTimeout(length int, timeout time.Duration, retry ...Retry) ([]byte, error)\n    func (c *Conn) RemoteAddr() net.Addr\n    func (c *Conn) Send(data []byte, retry ...Retry) error\n    func (c *Conn) SendRecv(data []byte, receive int, retry ...Retry) ([]byte, error)\n    func (c *Conn) SendRecvWithTimeout(data []byte, receive int, timeout time.Duration, retry ...Retry) ([]byte, error)\n    func (c *Conn) SendWithTimeout(data []byte, timeout time.Duration, retry ...Retry) error\n    func (c *Conn) SetDeadline(t time.Time) error\n    func (c *Conn) SetRecvBufferWait(bufferWaitDuration time.Duration)\n    func (c *Conn) SetRecvDeadline(t time.Time) error\n    func (c *Conn) SetSendDeadline(t time.Time) error\n"})}),"\n",(0,c.jsx)(e.h2,{id:"\u5199\u5165\u64CD\u4F5C",children:"\u5199\u5165\u64CD\u4F5C"}),"\n",(0,c.jsxs)(e.p,{children:["TCP\u901A\u4FE1\u5199\u5165\u64CD\u4F5C\u7531 ",(0,c.jsx)(e.code,{children:"Send"})," \u65B9\u6CD5\u5B9E\u73B0\uFF0C\u5E76\u63D0\u4F9B\u4E86\u9519\u8BEF\u91CD\u8BD5\u7684\u673A\u5236\uFF0C\u7531\u7B2C\u4E8C\u4E2A\u975E\u5FC5\u9700\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"retry"})," \u63D0\u4F9B\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F ",(0,c.jsx)(e.code,{children:"Send"})," \u65B9\u6CD5\u4E0D\u5E26\u4EFB\u4F55\u7684\u7F13\u51B2\u673A\u5236\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6BCF\u8C03\u7528\u4E00\u6B21 ",(0,c.jsx)(e.code,{children:"Send"})," \u65B9\u6CD5\u5C06\u4F1A\u7ACB\u5373\u8C03\u7528\u5E95\u5C42\u7684TCP Write\u65B9\u6CD5\u5199\u5165\u6570\u636E(\u7F13\u51B2\u673A\u5236\u4F9D\u9760\u7CFB\u7EDF\u5E95\u5C42\u5B9E\u73B0)\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u60F3\u8981\u8FDB\u884C\u8F93\u51FA\u7F13\u51B2\u63A7\u5236\uFF0C\u8BF7\u5728\u4E1A\u52A1\u5C42\u8FDB\u884C\u5904\u7406\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u8FDB\u884CTCP\u5199\u5165\u65F6\uFF0C\u53EF\u9760\u7684\u901A\u4FE1\u573A\u666F\u4E0B\u5F80\u5F80\u662F\u4E00\u5199\u4E00\u8BFB\uFF0C\u5373 ",(0,c.jsx)(e.code,{children:"Send"})," \u6210\u529F\u4E4B\u540E\u63A5\u7740\u4FBF\u5F00\u59CB ",(0,c.jsx)(e.code,{children:"Recv"})," \u83B7\u53D6\u76EE\u6807\u7684\u53CD\u9988\u7ED3\u679C\u3002\u56E0\u6B64 ",(0,c.jsx)(e.code,{children:"gtcp.Conn"})," \u4E5F\u63D0\u4F9B\u4E86\u65B9\u4FBF\u7684 ",(0,c.jsx)(e.code,{children:"SendRecv"})," \u65B9\u6CD5\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u8BFB\u53D6\u64CD\u4F5C",children:"\u8BFB\u53D6\u64CD\u4F5C"}),"\n",(0,c.jsxs)(e.p,{children:["TCP\u901A\u4FE1\u8BFB\u53D6\u64CD\u4F5C\u7531 ",(0,c.jsx)(e.code,{children:"Recv"})," \u65B9\u6CD5\u5B9E\u73B0\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86\u9519\u8BEF\u91CD\u8BD5\u7684\u673A\u5236\uFF0C\u7531\u7B2C\u4E8C\u4E2A\u975E\u5FC5\u9700\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"retry"})," \u63D0\u4F9B\u3002 ",(0,c.jsx)(e.code,{children:"Recv"})," \u65B9\u6CD5\u63D0\u4F9B\u4E86\u5185\u7F6E\u7684\u8BFB\u53D6\u7F13\u51B2\u63A7\u5236\uFF0C\u8BFB\u53D6\u6570\u636E\u65F6\u53EF\u4EE5\u6307\u5B9A\u8BFB\u53D6\u7684\u957F\u5EA6\uFF08\u7531 ",(0,c.jsx)(e.code,{children:"length"})," \u53C2\u6570\u6307\u5B9A\uFF09\uFF0C\u5F53\u8BFB\u53D6\u5230\u6307\u5B9A\u957F\u5EA6\u7684\u6570\u636E\u540E\u5C06\u4F1A\u7ACB\u5373\u8FD4\u56DE\u3002\u5982\u679C ",(0,c.jsx)(e.code,{children:"length < 0"})," \u90A3\u4E48\u5C06\u4F1A\u8BFB\u53D6\u6240\u6709\u53EF\u8BFB\u53D6\u7684\u7F13\u51B2\u533A\u6570\u636E\u5E76\u8FD4\u56DE\u3002\u5F53 ",(0,c.jsx)(e.code,{children:"length = 0"})," \u65F6\u8868\u793A\u83B7\u53D6\u4E00\u6B21\u7F13\u51B2\u533A\u7684\u6570\u636E\u540E\u7ACB\u5373\u8FD4\u56DE\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5982\u679C\u4F7F\u7528 ",(0,c.jsx)(e.code,{children:"Recv(-1)"})," \u53EF\u4EE5\u8BFB\u53D6\u6240\u6709\u7F13\u51B2\u533A\u53EF\u8BFB\u6570\u636E(\u957F\u5EA6\u4E0D\u5B9A\uFF0C\u5982\u679C\u53D1\u9001\u7684\u6570\u636E\u5305\u592A\u957F\u6709\u53EF\u80FD\u4F1A\u88AB\u622A\u65AD)\uFF0C\u4F46\u9700\u8981\u6CE8\u610F\u5305\u7684\u89E3\u6790\u95EE\u9898\uFF0C\u5BB9\u6613\u4EA7\u751F\u975E\u5B8C\u6574\u5305\u7684\u60C5\u51B5\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0C\u4E1A\u52A1\u5C42\u9700\u8981\u6839\u636E\u65E2\u5B9A\u7684\u6570\u636E\u5305\u7ED3\u6784\u81EA\u5DF1\u8D1F\u8D23\u5305\u7684\u5B8C\u6574\u6027\u5904\u7406\u3002\u63A8\u8350\u4F7F\u7528\u540E\u7EED\u4ECB\u7ECD\u7684 ",(0,c.jsx)(e.code,{children:"\u7B80\u5355\u534F\u8BAE"})," \u901A\u8FC7 ",(0,c.jsx)(e.code,{children:"SendPkg"}),"/ ",(0,c.jsx)(e.code,{children:"RecvPkg"})," \u6765\u5B9E\u73B0\u6D88\u606F\u5305\u7684\u53D1\u9001/\u63A5\u6536\uFF0C\u5177\u4F53\u8BF7\u67E5\u770B\u540E\u7EED\u7AE0\u8282\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u8D85\u65F6\u5904\u7406",children:"\u8D85\u65F6\u5904\u7406"}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"gtcp.Conn"})," \u5BF9TCP\u901A\u4FE1\u65F6\u7684\u6570\u636E\u5199\u5165\u548C\u8BFB\u53D6\u63D0\u4F9B\u4E86\u8D85\u65F6\u5904\u7406\uFF0C\u901A\u8FC7\u65B9\u6CD5\u4E2D\u7684 ",(0,c.jsx)(e.code,{children:"timeout"})," \u53C2\u6570\u6307\u5B9A\uFF0C\u8FD9\u5757\u6BD4\u8F83\u7B80\u5355\uFF0C\u4E0D\u8FC7\u591A\u9610\u8FF0\u3002"]}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsxs)(e.p,{children:["\u6211\u4EEC\u63A5\u4E0B\u6765\u901A\u8FC7\u901A\u8FC7\u51E0\u4E2A\u4F8B\u5B50\u6765\u770B\u770B\u5982\u4F55\u4F7F\u7528 ",(0,c.jsx)(e.code,{children:"gtcp.Conn"})," \u5BF9\u8C61\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u4F7F\u7528\u793A\u4F8B",children:"\u4F7F\u7528\u793A\u4F8B"}),"\n",(0,c.jsx)(e.h3,{id:"\u793A\u4F8B1\u7B80\u5355\u4F7F\u7528",children:"\u793A\u4F8B1\uFF0C\u7B80\u5355\u4F7F\u7528"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "time"\n    "github.com/gogf/gf/v2/net/gtcp"\n    "github.com/gogf/gf/v2/os/glog"\n    "github.com/gogf/gf/v2/util/gconv"\n)\n\nfunc main() {\n    // Server\n    go gtcp.NewServer("127.0.0.1:8999", func(conn *gtcp.Conn) {\n        defer conn.Close()\n        for {\n            data, err := conn.Recv(-1)\n            if len(data) > 0 {\n                  fmt.Println(string(data))\n            }\n            if err != nil {\n                break\n            }\n        }\n    }).Run()\n\n    time.Sleep(time.Second)\n\n    // Client\n    conn, err := gtcp.NewConn("127.0.0.1:8999")\n    if err != nil {\n        panic(err)\n    }\n    for i := 0; i < 10000; i++ {\n        if err := conn.Send([]byte(gconv.String(i))); err != nil {\n            glog.Error(err)\n        }\n        time.Sleep(time.Second)\n    }\n}\n'})}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"Server"})," \u7AEF\uFF0C\u63A5\u6536\u5230\u5BA2\u6237\u7AEF\u7684\u6570\u636E\u540E\u7ACB\u5373\u6253\u5370\u5230\u7EC8\u7AEF\u4E0A\u3002"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"Client"})," \u7AEF\uFF0C\u4F7F\u7528\u540C\u4E00\u4E2A\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u5728\u5FAA\u73AF\u4E2D\u6BCF\u96941\u79D2\u5411\u670D\u52A1\u7AEF\u53D1\u9001\u5F53\u524D\u9012\u589E\u7684\u6570\u5B57\u3002\u540C\u65F6\uFF0C\u8BE5\u529F\u80FD\u4E5F\u53EF\u4EE5\u6F14\u793A\u51FA\u5E95\u5C42 ",(0,c.jsx)(e.code,{children:"Socket"})," \u901A\u4FE1\u5E76\u6CA1\u6709\u4F7F\u7528\u7F13\u51B2\u5B9E\u73B0\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6267\u884C\u4E00\u6B21 ",(0,c.jsx)(e.code,{children:"Send"})," \u5373\u7ACB\u523B\u5411\u670D\u52A1\u7AEF\u53D1\u9001\u6570\u636E\u3002\u56E0\u6B64\uFF0C\u5BA2\u6237\u7AEF\u9700\u8981\u5728\u672C\u5730\u81EA\u884C\u7BA1\u7406\u597D\u9700\u8981\u53D1\u9001\u7684\u7F13\u51B2\u6570\u636E\u3002"]}),"\n",(0,c.jsx)(e.li,{children:"\u6267\u884C\u7ED3\u679C \u6267\u884C\u540E\uFF0C\u53EF\u4EE5\u770B\u5230Server\u5728\u7EC8\u7AEF\u4E0A\u8F93\u51FA\u4EE5\u4E0B\u4FE1\u606F\uFF1A"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-shell",children:"    2018-07-11 22:11:08.650 0\n    2018-07-11 22:11:09.651 1\n    2018-07-11 22:11:10.651 2\n    2018-07-11 22:11:11.651 3\n    2018-07-11 22:11:12.651 4\n    2018-07-11 22:11:13.651 5\n    2018-07-11 22:11:14.652 6\n    2018-07-11 22:11:15.652 7\n    2018-07-11 22:11:16.652 8\n    2018-07-11 22:11:17.652 9\n    2018-07-11 22:11:18.652 10\n    2018-07-11 22:11:19.653 11\n    ...\n"})}),"\n",(0,c.jsx)(e.h3,{id:"\u793A\u4F8B2\u56DE\u663E\u670D\u52A1",children:"\u793A\u4F8B2\uFF0C\u56DE\u663E\u670D\u52A1"}),"\n",(0,c.jsx)(e.p,{children:"\u6211\u4EEC\u5C06\u4E4B\u524D\u7684\u56DE\u663E\u670D\u52A1\u6539\u8FDB\u4E00\u4E0B\uFF1A"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "time"\n    "github.com/gogf/gf/v2/net/gtcp"\n    "github.com/gogf/gf/v2/os/glog"\n    "github.com/gogf/gf/v2/os/gtime"\n)\n\nfunc main() {\n    // Server\n    go gtcp.NewServer("127.0.0.1:8999", func(conn *gtcp.Conn) {\n        defer conn.Close()\n        for {\n            data, err := conn.Recv(-1)\n            if len(data) > 0 {\n                if err := conn.Send(append([]byte("> "), data...)); err != nil {\n                  fmt.Println(err)\n                }\n            }\n            if err != nil {\n                break\n            }\n        }\n    }).Run()\n\n    time.Sleep(time.Second)\n\n    // Client\n    for {\n       if conn, err := gtcp.NewConn("127.0.0.1:8999"); err == nil {\n           if b, err := conn.SendRecv([]byte(gtime.Datetime()), -1); err == nil {\n               fmt.Println(string(b), conn.LocalAddr(), conn.RemoteAddr())\n           } else {\n               fmt.Println(err)\n           }\n           conn.Close()\n       } else {\n           glog.Error(err)\n       }\n       time.Sleep(time.Second)\n    }\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u8BE5\u793A\u4F8B\u7A0B\u5E8F\u4E2D\uFF0C ",(0,c.jsx)(e.code,{children:"Client"})," \u6BCF\u96941\u79D2\u949F\u5411 ",(0,c.jsx)(e.code,{children:"Server"})," \u53D1\u9001\u5F53\u524D\u7684\u65F6\u95F4\u4FE1\u606F\uFF0C ",(0,c.jsx)(e.code,{children:"Server"})," \u63A5\u6536\u5230\u4E4B\u540E\u8FD4\u56DE\u539F\u6570\u636E\u4FE1\u606F\uFF0C ",(0,c.jsx)(e.code,{children:"Client"})," \u63A5\u6536\u5230 ",(0,c.jsx)(e.code,{children:"Server"})," \u7AEF\u8FD4\u56DE\u4FE1\u606F\u540E\u7ACB\u5373\u6253\u5370\u5230\u7EC8\u7AEF\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u6267\u884C\u540E\uFF0C\u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"> 2018-07-19 23:25:43 127.0.0.1:34306 127.0.0.1:8999\n> 2018-07-19 23:25:44 127.0.0.1:34308 127.0.0.1:8999\n> 2018-07-19 23:25:45 127.0.0.1:34312 127.0.0.1:8999\n> 2018-07-19 23:25:46 127.0.0.1:34314 127.0.0.1:8999\n"})}),"\n",(0,c.jsx)(e.h3,{id:"\u793A\u4F8B3http\u5BA2\u6237\u7AEF",children:"\u793A\u4F8B3\uFF0CHTTP\u5BA2\u6237\u7AEF"}),"\n",(0,c.jsxs)(e.p,{children:["\u6211\u4EEC\u5728\u8FD9\u4E2A\u793A\u4F8B\u4E2D\u4F7F\u7528gtcp\u5305\u6765\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684HTTP\u5BA2\u6237\u7AEF\uFF0C\u8BFB\u53D6\u5E76\u6253\u5370\u51FA\u767E\u5EA6\u9996\u9875\u7684 ",(0,c.jsx)(e.code,{children:"header"})," \u548C ",(0,c.jsx)(e.code,{children:"content"})," \u5185\u5BB9\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "bytes"\n    "github.com/gogf/gf/v2/net/gtcp"\n    "github.com/gogf/gf/v2/util/gconv"\n)\n\nfunc main() {\n    conn, err := gtcp.NewConn("www.baidu.com:80")\n    if err != nil {\n        panic(err)\n    }\n    defer conn.Close()\n\n    if err := conn.Send([]byte("GET / HTTP/1.1\\r\\n\\r\\n")); err != nil {\n        panic(err)\n    }\n\n    header        := make([]byte, 0)\n    content       := make([]byte, 0)\n    contentLength := 0\n    for {\n        data, err := conn.RecvLine()\n        // header\u8BFB\u53D6\uFF0C\u89E3\u6790\u6587\u672C\u957F\u5EA6\n        if len(data) > 0 {\n            array := bytes.Split(data, []byte(": "))\n            // \u83B7\u5F97\u9875\u9762\u5185\u5BB9\u957F\u5EA6\n            if contentLength == 0 && len(array) == 2 && bytes.EqualFold([]byte("Content-Length"), array[0]) {\n                contentLength = gconv.Int(string(array[1][:len(array[1])-1]))           }\n            header = append(header, data...)\n            header = append(header, \'\\n\')\n        }\n        // header\u8BFB\u53D6\u5B8C\u6BD5\uFF0C\u8BFB\u53D6\u6587\u672C\u5185\u5BB9\n        if contentLength > 0 && len(data) == 1 {\n            content, _ = conn.Recv(contentLength)\n            break\n        }\n        if err != nil {\n            fmt.Errorf("ERROR: %s\\n", err.Error())\n            break\n        }\n    }\n\n    if len(header) > 0 {\n        fmt.Println(string(header))\n    }\n    if len(content) > 0 {\n        fmt.Println(string(content))\n    }\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u6267\u884C\u540E\uFF0C\u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:'HTTP/1.1 200 OK\nAccept-Ranges: bytes\nCache-Control: no-cache\nConnection: Keep-Alive\nContent-Length: 14615\nContent-Type: text/html\nDate: Sat, 21 Jul 2018 04:21:03 GMT\nEtag: "5b3c3650-3917"\nLast-Modified: Wed, 04 Jul 2018 02:52:00 GMT\nP3p: CP=" OTI DSP COR IVA OUR IND COM "\nPragma: no-cache\nServer: BWS/1.1\n...\n(\u7565)\n'})})]})}function h(n={}){let{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(a,{...n})}):a(n)}},250065:function(n,e,r){r.d(e,{Z:function(){return d},a:function(){return o}});var t=r(667294);let c={},i=t.createContext(c);function o(n){let e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);