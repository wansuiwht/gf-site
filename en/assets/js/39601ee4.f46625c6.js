"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["15066"],{360046:function(r,e,n){n.r(e),n.d(e,{metadata:()=>o,contentTitle:()=>l,default:()=>t,assets:()=>d,toc:()=>a,frontMatter:()=>c});var o=JSON.parse('{"id":"\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027","title":"\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027","description":"\u9519\u8BEF\u5806\u6808","source":"@site/versioned_docs/version-2.3.x/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027.md","sourceDirName":"\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406","slug":"/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027","permalink":"/en/2.3.x/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.3.x/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027.md","tags":[],"version":"2.3.x","lastUpdatedBy":"John","lastUpdatedAt":1730365530000,"sidebarPosition":1,"frontMatter":{"title":"\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027","sidebar_position":1,"hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"\u9519\u8BEF\u5904\u7406-\u5E38\u7528\u65B9\u6CD5","permalink":"/en/2.3.x/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u5E38\u7528\u65B9\u6CD5"},"next":{"title":"\u9519\u8BEF\u5904\u7406-\u9519\u8BEF\u6BD4\u8F83","permalink":"/en/2.3.x/\u6838\u5FC3\u7EC4\u4EF6-\u91CD\u70B9/\u9519\u8BEF\u5904\u7406/\u9519\u8BEF\u5904\u7406-\u9519\u8BEF\u6BD4\u8F83"}}'),i=n("785893"),s=n("250065");let c={title:"\u9519\u8BEF\u5904\u7406-\u5806\u6808\u7279\u6027",sidebar_position:1,hide_title:!0},l=void 0,d={},a=[{value:"\u9519\u8BEF\u5806\u6808",id:"\u9519\u8BEF\u5806\u6808",level:2},{value:"<code>HasStack</code> \u5224\u65AD\u9519\u8BEF\u662F\u5426\u5E26\u5806\u6808",id:"hasstack-\u5224\u65AD\u9519\u8BEF\u662F\u5426\u5E26\u5806\u6808",level:2},{value:"<code>Stack</code> \u83B7\u53D6\u5806\u6808\u4FE1\u606F",id:"stack-\u83B7\u53D6\u5806\u6808\u4FE1\u606F",level:2},{value:"<code>Current</code> \u83B7\u53D6\u5F53\u524D <code>error</code>",id:"current-\u83B7\u53D6\u5F53\u524D-error",level:2},{value:"<code>Next/Unwrap</code> \u83B7\u53D6\u4E0B\u4E00\u5C42 <code>error</code>",id:"nextunwrap-\u83B7\u53D6\u4E0B\u4E00\u5C42-error",level:2},{value:"<code>Cause</code> \u83B7\u53D6\u6839\u9519\u8BEF <code>error</code>",id:"cause-\u83B7\u53D6\u6839\u9519\u8BEF-error",level:2}];function g(r){let e={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...r.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u9519\u8BEF\u5806\u6808",children:"\u9519\u8BEF\u5806\u6808"}),"\n",(0,i.jsxs)(e.p,{children:["\u6807\u51C6\u5E93\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u9519\u8BEF\u5B9E\u73B0\u6BD4\u8F83\u7B80\u5355\uFF0C\u65E0\u6CD5\u8FDB\u884C\u5806\u6808\u8FFD\u6EAF\uFF0C\u5BF9\u4E8E\u4EA7\u751F\u9519\u8BEF\u65F6\u7684\u4E0A\u5C42\u8C03\u7528\u8005\u6765\u8BB2\u4E0D\u662F\u5F88\u53CB\u597D\uFF0C\u65E0\u6CD5\u83B7\u5F97\u9519\u8BEF\u7684\u8C03\u7528\u94FE\u8BE6\u7EC6\u4FE1\u606F\u3002 ",(0,i.jsx)(e.code,{children:"gerror"})," \u652F\u6301\u9519\u8BEF\u5806\u6808\u8BB0\u5F55\uFF0C\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"New/Newf"}),"\u3001 ",(0,i.jsx)(e.code,{children:"Wrap/Wrapf"})," \u7B49\u65B9\u6CD5\u5747\u4F1A\u81EA\u52A8\u8BB0\u5F55\u5F53\u524D\u9519\u8BEF\u4EA7\u751F\u65F6\u7684\u5806\u6808\u4FE1\u606F\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u793A\u4F8B\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "github.com/gogf/gf/v2/errors/gerror"\n)\n\nfunc OpenFile() error {\n    return gerror.New("permission denied")\n}\n\nfunc OpenConfig() error {\n    return gerror.Wrap(OpenFile(), "configuration file opening failed")\n}\n\nfunc ReadConfig() error {\n    return gerror.Wrap(OpenConfig(), "reading configuration failed")\n}\n\nfunc main() {\n    fmt.Printf("%+v", ReadConfig())\n}\n\n// Output:\n// reading configuration failed: configuration file opening failed: permission denied\n// 1. reading configuration failed\n//     1). main.ReadConfig\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:18\n//     2). main.main\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:25\n// 2. configuration file opening failed\n//     1). main.OpenConfig\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:14\n//     2). main.ReadConfig\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:18\n//     3). main.main\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:25\n// 3. permission denied\n//     1). main.OpenFile\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:10\n//     2). main.OpenConfig\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:14\n//     3). main.ReadConfig\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:18\n//     4). main.main\n//         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/v2/geg/errors/gerror/gerror2.go:25\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u53EF\u4EE5\u770B\u5230\uFF0C\u8C03\u7528\u7AEF\u53EF\u4EE5\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"Wrap"})," \u65B9\u6CD5\u5C06\u5E95\u5C42\u7684\u9519\u8BEF\u4FE1\u606F\u8FDB\u884C\u5C42\u7EA7\u53E0\u52A0\uFF0C\u5E76\u4E14\u5305\u542B\u5B8C\u6574\u7684\u9519\u8BEF\u5806\u6808\u4FE1\u606F\u3002"]}),"\n",(0,i.jsxs)(e.h2,{id:"hasstack-\u5224\u65AD\u9519\u8BEF\u662F\u5426\u5E26\u5806\u6808",children:[(0,i.jsx)(e.code,{children:"HasStack"})," \u5224\u65AD\u9519\u8BEF\u662F\u5426\u5E26\u5806\u6808"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF4\u660E\uFF1A\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"HasStack"})," \u65B9\u6CD5\u6211\u4EEC\u53EF\u4EE5\u5224\u65AD\u7ED9\u5B9A\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u63A5\u53E3\u5BF9\u8C61\u662F\u5426\u5B9E\u73B0\uFF08\u5305\u542B\uFF09\u4E86\u5806\u6808\u4FE1\u606F\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"HasStack(err error) bool\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'func ExampleHasStack() {\n      err1 := errors.New("sql error")\n      err2 := gerror.New("write error")\n      fmt.Println(gerror.HasStack(err1))\n      fmt.Println(gerror.HasStack(err2))\n\n      // Output:\n      // false\n      // true\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"stack-\u83B7\u53D6\u5806\u6808\u4FE1\u606F",children:[(0,i.jsx)(e.code,{children:"Stack"})," \u83B7\u53D6\u5806\u6808\u4FE1\u606F"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF4\u660E\uFF1A\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"Stack"})," \u65B9\u6CD5\u6211\u4EEC\u53EF\u4EE5\u83B7\u5F97 ",(0,i.jsx)(e.code,{children:"error"})," \u5BF9\u8C61\u7684\u5B8C\u6574\u5806\u6808\u4FE1\u606F\uFF0C\u8FD4\u56DE\u5806\u6808\u5217\u8868\u5B57\u7B26\u4E32\u3002 \u6CE8\u610F\u53C2\u6570\u4E3A\u6807\u51C6\u5E93 ",(0,i.jsx)(e.code,{children:"error"})," \u7C7B\u578B\uFF0C\u5F53\u8BE5\u53C2\u6570\u4E3A ",(0,i.jsx)(e.code,{children:"gerror"})," \u6A21\u5757\u751F\u6210\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u65F6\uFF0C \u6216\u8005\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u5BF9\u8C61\u5B9E\u73B0\u4E86\u8BE5\u63A5\u53E3\u65F6\u652F\u6301\u6253\u5370\uFF0C\u5426\u5219\uFF0C\u8FD4\u56DE\u7A7A\u5B57\u7B26\u4E32\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"Stack(err error) string\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'func ExampleStack() {\n       var err error\n      err = errors.New("sql error")\n      err = gerror.Wrap(err, "adding failed")\n      err = gerror.Wrap(err, "api calling failed")\n      fmt.Println(gerror.Stack(err))\n\n      // Output:\n      // 1. api calling failed\n      //     1).  main.main\n      //         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/.example/other/test.go:14\n      // 2. adding failed\n      //     1).  main.main\n      //         /Users/john/Workspace/Go/GOPATH/src/github.com/gogf/gf/.example/other/test.go:13\n      // 3. sql error\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"current-\u83B7\u53D6\u5F53\u524D-error",children:[(0,i.jsx)(e.code,{children:"Current"})," \u83B7\u53D6\u5F53\u524D ",(0,i.jsx)(e.code,{children:"error"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF4\u660E\uFF1A ",(0,i.jsx)(e.code,{children:"Current"})," \u65B9\u6CD5\u7528\u4E8E\u83B7\u53D6\u5F53\u524D\u5C42\u7EA7\u7684\u9519\u8BEF\u4FE1\u606F\uFF0C\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"error"})," \u63A5\u53E3\u5BF9\u8C61\u8FD4\u56DE\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"Current(err error) error\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'func ExampleCurrent() {\n        var err error\n      err = errors.New("sql error")\n      err = gerror.Wrap(err, "adding failed")\n      err = gerror.Wrap(err, "api calling failed")\n      fmt.Println(err)\n      fmt.Println(gerror.Current(err))\n\n      // Output:\n      // api calling failed: adding failed: sql error\n      // api calling failed\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"nextunwrap-\u83B7\u53D6\u4E0B\u4E00\u5C42-error",children:[(0,i.jsx)(e.code,{children:"Next/Unwrap"})," \u83B7\u53D6\u4E0B\u4E00\u5C42 ",(0,i.jsx)(e.code,{children:"error"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF4\u660E\uFF1A ",(0,i.jsx)(e.code,{children:"Next/Unwrap"})," \u65B9\u6CD5\u7528\u4E8E\u83B7\u53D6\u5C42\u7EA7\u9519\u8BEF\u7684\u4E0B\u4E00\u7EA7\u9519\u8BEF ",(0,i.jsx)(e.code,{children:"error"})," \u63A5\u53E3\u5BF9\u8C61\u3002\u5F53\u4E0B\u4E00\u5C42\u7EA7\u4E0D\u5B58\u5728\u65F6\uFF0C\u8FD4\u56DE ",(0,i.jsx)(e.code,{children:"nil"}),"\u3002\u5176\u4E2D ",(0,i.jsx)(e.code,{children:"Unwrap"})," \u65B9\u6CD5\u662F ",(0,i.jsx)(e.code,{children:"Next"})," \u65B9\u6CD5\u7684\u522B\u540D\uFF0C\u662F ",(0,i.jsx)(e.code,{children:"Golang v1.17"})," \u7248\u672C\u5F00\u59CB\u652F\u6301\u7684\u9519\u8BEF\u5806\u6808\u904D\u5386\u65B9\u6CD5\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"Next(err error) error\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B1\uFF1A\u7B80\u5355\u7684\u9519\u8BEF\u5C42\u7EA7\u8BBF\u95EE\u793A\u4F8B\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'func ExampleNext() {\n      var err error\n      err = errors.New("sql error")\n      err = gerror.Wrap(err, "adding failed")\n      err = gerror.Wrap(err, "api calling failed")\n\n      fmt.Println(err)\n\n      err = gerror.Next(err)\n      fmt.Println(err)\n\n      err = gerror.Next(err)\n      fmt.Println(err)\n\n      // Output:\n      // api calling failed: adding failed: sql error\n      // adding failed: sql error\n      // sql error\n}\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B2\uFF1A\u5E38\u89C1\u904D\u5386\u903B\u8F91\u4EE3\u7801\u793A\u4F8B\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"func IsGrpcErrorNotFound(err error) bool {\n      if err != nil {\n          for e := err; e != nil; e = gerror.Unwrap(e) {\n              if s, ok := status.FromError(e); ok && s != nil && s.Code() == codes.NotFound {\n                  return true\n              }\n          }\n      }\n      return false\n}\n"})}),"\n",(0,i.jsxs)(e.h2,{id:"cause-\u83B7\u53D6\u6839\u9519\u8BEF-error",children:[(0,i.jsx)(e.code,{children:"Cause"})," \u83B7\u53D6\u6839\u9519\u8BEF ",(0,i.jsx)(e.code,{children:"error"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF4\u660E\uFF1A\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"Cause"})," \u65B9\u6CD5\u6211\u4EEC\u53EF\u4EE5\u83B7\u5F97 ",(0,i.jsx)(e.code,{children:"error"})," \u5BF9\u8C61\u7684\u6839\u9519\u8BEF\u4FE1\u606F\uFF08\u539F\u59CB\u9519\u8BEF\uFF09\u3002 \u6CE8\u610F\u53C2\u6570\u4E3A\u6807\u51C6\u5E93 ",(0,i.jsx)(e.code,{children:"error"})," \u7C7B\u578B\uFF0C\u5F53\u8BE5\u53C2\u6570\u4E3A ",(0,i.jsx)(e.code,{children:"gerror"})," \u6A21\u5757\u751F\u6210\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u65F6\uFF0C \u6216\u8005\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u5BF9\u8C61\u5B9E\u73B0\u4E86\u8BE5\u63A5\u53E3\u65B9\u6CD5\u65F6\u652F\u6301\u6253\u5370\uFF0C\u5426\u5219\uFF0C\u8FD4\u56DE\u8F93\u51FA\u7684 ",(0,i.jsx)(e.code,{children:"error"})," \u5BF9\u8C61\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"Next(err error) error\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n      "fmt"\n      "github.com/gogf/gf/v2/errors/gerror"\n)\n\nfunc OpenFile() error {\n      return gerror.New("permission denied")\n}\n\nfunc OpenConfig() error {\n      return gerror.Wrap(OpenFile(), "configuration file opening failed")\n}\n\nfunc ReadConfig() error {\n      return gerror.Wrap(OpenConfig(), "reading configuration failed")\n}\n\nfunc main() {\n      fmt.Println(gerror.Cause(ReadConfig()))\n}\n\n// Output:\n// permission denied\n'})})]})}function t(r={}){let{wrapper:e}={...(0,s.a)(),...r.components};return e?(0,i.jsx)(e,{...r,children:(0,i.jsx)(g,{...r})}):g(r)}},250065:function(r,e,n){n.d(e,{Z:function(){return l},a:function(){return c}});var o=n(667294);let i={},s=o.createContext(i);function c(r){let e=o.useContext(s);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(i):r.components||i:c(r.components),o.createElement(s.Provider,{value:e},r.children)}}}]);