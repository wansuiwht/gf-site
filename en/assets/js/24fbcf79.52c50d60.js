"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["37789"],{12242:function(e,t,n){n.r(t),n.d(t,{metadata:()=>o,contentTitle:()=>l,default:()=>u,assets:()=>d,toc:()=>a,frontMatter:()=>c});var o=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient","title":"HTTPClient","description":"The powerful HTTP client component gclient provided by the GoFrame framework supports convenient chain operations for HTTP requests. The client supports custom request settings and return object operations, with detailed instructions on setting parameters such as timeout, Cookie, Header, etc.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient","slug":"/docs/web/http-client","permalink":"/en/docs/web/http-client","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":9,"frontMatter":{"slug":"/docs/web/http-client","title":"HTTPClient","sidebar_position":9,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","HTTP Client","gclient","HTTP Request","Chain Operations","HTTP Methods","Custom Requests","Connection Pool","Return Objects"],"description":"The powerful HTTP client component gclient provided by the GoFrame framework supports convenient chain operations for HTTP requests. The client supports custom request settings and return object operations, with detailed instructions on setting parameters such as timeout, Cookie, Header, etc."},"sidebar":"mainSidebar","previous":{"title":"Exception Handling","permalink":"/en/docs/web/panic-handling"},"next":{"title":"HTTPClient - Examples","permalink":"/en/docs/web/http-client-example"}}'),i=n("785893"),r=n("250065"),s=n("203105");let c={slug:"/docs/web/http-client",title:"HTTPClient",sidebar_position:9,hide_title:!0,keywords:["GoFrame","GoFrame Framework","HTTP Client","gclient","HTTP Request","Chain Operations","HTTP Methods","Custom Requests","Connection Pool","Return Objects"],description:"The powerful HTTP client component gclient provided by the GoFrame framework supports convenient chain operations for HTTP requests. The client supports custom request settings and return object operations, with detailed instructions on setting parameters such as timeout, Cookie, Header, etc."},l=void 0,d={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Chain Operations",id:"chain-operations",level:2},{value:"Return Objects",id:"return-objects",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"Documents",id:"documents",level:2}];function h(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"GoFrame"})," framework offers a powerful and easy-to-use ",(0,i.jsx)(t.code,{children:"HTTP"})," client, implemented by the ",(0,i.jsx)(t.code,{children:"gclient"})," component. Object creation can be done through the package method ",(0,i.jsx)(t.code,{children:"gclient.New()"})," or by calling the ",(0,i.jsx)(t.code,{children:"g.Client()"})," method. It is recommended to use ",(0,i.jsx)(t.code,{children:"g.Client()"})," to conveniently create an ",(0,i.jsx)(t.code,{children:"HTTP"})," client object. Since ",(0,i.jsx)(t.code,{children:"gclient.Client"})," is internally extended from the standard library's ",(0,i.jsx)(t.code,{children:"http.Client"})," object, any features present in ",(0,i.jsx)(t.code,{children:"http.Client"})," are also supported by ",(0,i.jsx)(t.code,{children:"gclient.Client"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Method List"}),": ",(0,i.jsx)(t.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gclient",children:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gclient"})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Brief Explanation"}),":"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["You can use ",(0,i.jsx)(t.code,{children:"New"})," to create a custom HTTP client object ",(0,i.jsx)(t.code,{children:"Client"}),", which can then be used to execute requests. This object employs a connection pool design internally, so it does not have a ",(0,i.jsx)(t.code,{children:"Close"})," method. An ",(0,i.jsx)(t.code,{children:"HTTP"})," client object can also be created via the ",(0,i.jsx)(t.code,{children:"g.Client()"})," shortcut method."]}),"\n",(0,i.jsxs)(t.li,{children:["The client provides a series of methods named after ",(0,i.jsx)(t.code,{children:"HTTP Methods"}),". Invoking these methods will initiate the corresponding ",(0,i.jsx)(t.code,{children:"HTTP Method"})," requests. The commonly used methods are ",(0,i.jsx)(t.code,{children:"Get"})," and ",(0,i.jsx)(t.code,{children:"Post"}),", while ",(0,i.jsx)(t.code,{children:"DoRequest"})," is the core request method that users can call to implement custom ",(0,i.jsx)(t.code,{children:"HTTP Method"})," requests."]}),"\n",(0,i.jsxs)(t.li,{children:["The result of the request is a ",(0,i.jsx)(t.code,{children:"*ClientResponse"})," object. You can obtain the corresponding return results through this object. The ",(0,i.jsx)(t.code,{children:"ReadAll"}),"/",(0,i.jsx)(t.code,{children:"ReadAllString"})," methods can be used to obtain the returned content. After use, this object needs to be closed through the ",(0,i.jsx)(t.code,{children:"Close"})," method to prevent memory overflow."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"*Bytes"})," method is used to obtain the binary data returned by the server. If the request fails, it returns ",(0,i.jsx)(t.code,{children:"nil"}),"; the ",(0,i.jsx)(t.code,{children:"*Content"})," method is used to request string result data. If the request fails, it returns an empty string; the ",(0,i.jsx)(t.code,{children:"Set*"})," method is for setting parameters of the ",(0,i.jsx)(t.code,{children:"Client"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"*Var"})," method directly requests and retrieves HTTP API results as a generic type for easy conversion. If the request fails or the request result is empty, an empty ",(0,i.jsx)(t.code,{children:"g.Var"})," generic object is returned, which does not affect the invocation of conversion methods."]}),"\n",(0,i.jsxs)(t.li,{children:["As can be seen, the data parameter ",(0,i.jsx)(t.code,{children:"data"})," for the client's request parameters is of the ",(0,i.jsx)(t.code,{children:"interface{}"})," type, meaning any data type can be passed. Common parameter data types are ",(0,i.jsx)(t.code,{children:"string"}),"/",(0,i.jsx)(t.code,{children:"map"}),". If the parameter is of ",(0,i.jsx)(t.code,{children:"map"})," type, the parameter value will be automatically ",(0,i.jsx)(t.code,{children:"urlencode"})," encoded."]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["Please use the given methods to create a ",(0,i.jsx)(t.code,{children:"Client"})," object, and do not use ",(0,i.jsx)(t.code,{children:"new(ghttp.Client)"})," or ",(0,i.jsx)(t.code,{children:"&ghttp.Client{}"})," to create a client object, otherwise, hmm."]})}),"\n",(0,i.jsx)(t.h2,{id:"chain-operations",children:"Chain Operations"}),"\n",(0,i.jsxs)(t.p,{children:["The client in the ",(0,i.jsx)(t.code,{children:"GoFrame"})," framework supports convenient chain operations. The commonly used methods are as follows (the document method list may lag behind the source code, so it is recommended to check the API documentation or source code ",(0,i.jsx)(t.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gclient",children:"https://pkg.go.dev/github.com/gogf/gf/v2/net/gclient"}),"):"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:"func (c *Client) Timeout(t time.Duration) *Client\nfunc (c *Client) Cookie(m map[string]string) *Client\nfunc (c *Client) Header(m map[string]string) *Client\nfunc (c *Client) HeaderRaw(headers string) *Client\nfunc (c *Client) ContentType(contentType string) *Client\nfunc (c *Client) ContentJson() *Client\nfunc (c *Client) ContentXml() *Client\nfunc (c *Client) BasicAuth(user, pass string) *Client\nfunc (c *Client) Retry(retryCount int, retryInterval time.Duration) *Client\nfunc (c *Client) Prefix(prefix string) *Client\nfunc (c *Client) Proxy(proxyURL string) *Client\nfunc (c *Client) RedirectLimit(redirectLimit int) *Client\nfunc (c *Client) Dump(dump ...bool) *Client\nfunc (c *Client) Use(handlers ...HandlerFunc) *Client\n"})}),"\n",(0,i.jsx)(t.p,{children:"Brief Explanation:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Timeout"})," method is used to set the current request timeout."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Cookie"})," method is used to set custom ",(0,i.jsx)(t.code,{children:"Cookie"})," information for the current request."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Header*"})," methods are used to set custom ",(0,i.jsx)(t.code,{children:"Header"})," information for the current request."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Content*"})," methods are used to set the ",(0,i.jsx)(t.code,{children:"Content-Type"})," information for the current request, and they support automatically checking submitted parameters and encoding according to this information."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"BasicAuth"})," method is used to set the ",(0,i.jsx)(t.code,{children:"HTTP Basic Auth"})," validation information."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Retry"})," method is used to set the number of retries and retry interval after a request failure."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Proxy"})," method is used to set up an http access proxy."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"RedirectLimit"})," method is used to limit the number of redirect hops."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"return-objects",children:"Return Objects"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"gclient.Response"})," is the corresponding return result object of an HTTP request, which inherits from ",(0,i.jsx)(t.code,{children:"http.Response"})," and can use all methods of ",(0,i.jsx)(t.code,{children:"http.Response"}),". It also adds the following methods:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:"func (r *Response) GetCookie(key string) string\nfunc (r *Response) GetCookieMap() map[string]string\nfunc (r *Response) Raw() string\nfunc (r *Response) RawDump()\nfunc (r *Response) RawRequest() string\nfunc (r *Response) RawResponse() string\nfunc (r *Response) ReadAll() []byte\nfunc (r *Response) ReadAllString() string\nfunc (r *Response) Close() error\n"})}),"\n",(0,i.jsxs)(t.p,{children:["It should be noted that ",(0,i.jsx)(t.code,{children:"Response"})," requires a manual call to the ",(0,i.jsx)(t.code,{children:"Close"})," method to close it. This means that regardless of whether you use the returned ",(0,i.jsx)(t.code,{children:"Response"})," object or not, you need to assign this return object to a variable and manually call its ",(0,i.jsx)(t.code,{children:"Close"})," method for closure (often using ",(0,i.jsx)(t.code,{children:"defer r.Close()"}),"), otherwise, it will cause file handle overflow and memory overflow."]}),"\n",(0,i.jsx)(t.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"ghttp"})," client defaults to disabling the ",(0,i.jsx)(t.code,{children:"KeepAlive"})," feature and the verification function for the server's ",(0,i.jsx)(t.code,{children:"TLS"})," certificate. If you need to enable it, you can customize the client's ",(0,i.jsx)(t.code,{children:"Transport"})," attribute."]}),"\n",(0,i.jsxs)(t.li,{children:["These advanced functions such as ",(0,i.jsx)(t.strong,{children:"Connection Pool Parameter Setting"})," and ",(0,i.jsx)(t.strong,{children:"Connection Proxy Settings"})," can also be achieved by customizing the client's ",(0,i.jsx)(t.code,{children:"Transport"})," attribute. This data inherits from the standard library's ",(0,i.jsx)(t.code,{children:"http.Transport"})," object."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"documents",children:"Documents"}),"\n","\n",(0,i.jsx)(s.Z,{})]})}function u(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},203105:function(e,t,n){n.d(t,{Z:()=>g});var o=n("785893");n("667294");var i=n("467026"),r=n("698404"),s=n("531183"),c=n("633876"),l=n("266026"),d=n("434751"),a=n("58608");let h={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};function u(e){let{href:t,children:n}=e;return(0,o.jsx)(s.Z,{href:t,className:(0,i.Z)("card padding--lg",h.cardContainer),children:n})}function m(e){let{href:t,icon:n,title:r,description:s}=e;return(0,o.jsxs)(u,{href:t,children:[(0,o.jsxs)(a.Z,{as:"h2",className:(0,i.Z)("text--truncate",h.cardTitle),title:r,children:[n," ",r]}),s&&(0,o.jsx)("p",{className:(0,i.Z)("text--truncate",h.cardDescription),title:s,children:s})]})}function p(e){let{item:t}=e,n=(0,r.LM)(t),i=function(){let{selectMessage:e}=(0,c.c)();return t=>e(t,(0,d.I)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t}))}();return n?(0,o.jsx)(m,{href:n,icon:"\uD83D\uDDC3\uFE0F",title:t.label,description:t.description??i(t.items.length)}):null}function f(e){let{item:t}=e,n=(0,l.Z)(t.href)?"\uD83D\uDCC4\uFE0F":"\uD83D\uDD17",i=(0,r.xz)(t.docId??void 0);return(0,o.jsx)(m,{href:t.href,icon:n,title:t.label,description:t.description??i?.description})}function j(e){let{item:t}=e;switch(t.type){case"link":return(0,o.jsx)(f,{item:t});case"category":return(0,o.jsx)(p,{item:t});default:throw Error(`unknown item type ${JSON.stringify(t)}`)}}function x(e){let{className:t}=e,n=(0,r.jA)();return(0,o.jsx)(g,{items:n.items,className:t})}function g(e){let{items:t,className:n}=e;if(!t)return(0,o.jsx)(x,{...e});let s=(0,r.MN)(t);return(0,o.jsx)("section",{className:(0,i.Z)("row",n),children:s.map((e,t)=>(0,o.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,o.jsx)(j,{item:e})},t))})}},633876:function(e,t,n){n.d(t,{c:function(){return l}});var o=n(667294),i=n(49931);let r=["zero","one","two","few","many","other"];function s(e){return r.filter(t=>e.includes(t))}let c={locale:"en",pluralForms:s(["one","other"]),select:e=>1===e?"one":"other"};function l(){let e=function(){let{i18n:{currentLocale:e}}=(0,i.Z)();return(0,o.useMemo)(()=>{try{return function(e){let t=new Intl.PluralRules(e);return{locale:e,pluralForms:s(t.resolvedOptions().pluralCategories),select:e=>t.select(e)}}(e)}catch(t){return console.error(`Failed to use Intl.PluralRules for locale "${e}".
Docusaurus will fallback to the default (English) implementation.
Error: ${t.message}
`),c}},[e])}();return{selectMessage:(t,n)=>(function(e,t,n){let o=e.split("|");if(1===o.length)return o[0];o.length>n.pluralForms.length&&console.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${o.length}: ${e}`);let i=n.select(t);return o[Math.min(n.pluralForms.indexOf(i),o.length-1)]})(n,t,e)}}},250065:function(e,t,n){n.d(t,{Z:function(){return c},a:function(){return s}});var o=n(667294);let i={},r=o.createContext(i);function s(e){let t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);