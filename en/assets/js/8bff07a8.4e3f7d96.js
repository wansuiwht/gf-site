"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["97912"],{540040:function(n,e,r){r.r(e),r.d(e,{metadata:()=>t,contentTitle:()=>d,default:()=>u,assets:()=>l,toc:()=>a,frontMatter:()=>s});var t=JSON.parse('{"id":"course/starbook/\u7B2C\u4E94\u7AE0-\u5B66\u4E60\u5355\u8BCD/5.2.\u968F\u673A\u83B7\u53D6\u82E5\u5E72\u5355\u8BCD","title":"5.2.\u968F\u673A\u83B7\u53D6\u82E5\u5E72\u5355\u8BCD","description":"\u4F7F\u7528GoFrame\u6846\u67B6\u8BBE\u8BA1\u968F\u673A\u83B7\u53D6\u5355\u8BCD\u63A5\u53E3\u3002\u63D0\u4F9B\u8DEF\u5F84words/rand\u7684API\uFF0C\u652F\u6301\u57281\u5230300\u4E4B\u95F4\u9650\u5236\u83B7\u53D6\u5355\u8BCD\u4E2A\u6570\u3002\u4F7F\u7528OrderRandom\u5B9E\u73B0\u968F\u673A\u67E5\u8BE2\uFF0CLimit\u9650\u5236\u67E5\u8BE2\u8FD4\u56DE\u6570\u91CF\u3002\u63A7\u5236\u5668\u8C03\u7528\u903B\u8F91\u5904\u7406\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5E76\u8FDB\u884C\u63A5\u53E3\u6D4B\u8BD5\u4EE5\u9A8C\u8BC1\u529F\u80FD\u3002","source":"@site/docs/course/starbook/\u7B2C\u4E94\u7AE0-\u5B66\u4E60\u5355\u8BCD/5.2.\u968F\u673A\u83B7\u53D6\u82E5\u5E72\u5355\u8BCD.md","sourceDirName":"course/starbook/\u7B2C\u4E94\u7AE0-\u5B66\u4E60\u5355\u8BCD","slug":"/course/starbook/learn-word-rand","permalink":"/en/course/starbook/learn-word-rand","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/course/starbook/\u7B2C\u4E94\u7AE0-\u5B66\u4E60\u5355\u8BCD/5.2.\u968F\u673A\u83B7\u53D6\u82E5\u5E72\u5355\u8BCD.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1731815164000,"frontMatter":{"hide_title":true,"slug":"/course/starbook/learn-word-rand","keywords":["GoFrame","API","\u968F\u673A\u5355\u8BCD","\u5355\u8BCD\u67E5\u8BE2","GoFrame\u6846\u67B6","\u5206\u9875\u5217\u8868","\u63A5\u53E3\u8BBE\u8BA1","\u7F16\u7A0B\u903B\u8F91","\u63A5\u53E3\u6D4B\u8BD5","\u5355\u8BCD\u5217\u8868"],"description":"\u4F7F\u7528GoFrame\u6846\u67B6\u8BBE\u8BA1\u968F\u673A\u83B7\u53D6\u5355\u8BCD\u63A5\u53E3\u3002\u63D0\u4F9B\u8DEF\u5F84words/rand\u7684API\uFF0C\u652F\u6301\u57281\u5230300\u4E4B\u95F4\u9650\u5236\u83B7\u53D6\u5355\u8BCD\u4E2A\u6570\u3002\u4F7F\u7528OrderRandom\u5B9E\u73B0\u968F\u673A\u67E5\u8BE2\uFF0CLimit\u9650\u5236\u67E5\u8BE2\u8FD4\u56DE\u6570\u91CF\u3002\u63A7\u5236\u5668\u8C03\u7528\u903B\u8F91\u5904\u7406\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5E76\u8FDB\u884C\u63A5\u53E3\u6D4B\u8BD5\u4EE5\u9A8C\u8BC1\u529F\u80FD\u3002"},"sidebar":"courseStarBookSidebar","previous":{"title":"5.1.\u524D\u7F6E\u8BF4\u660E","permalink":"/en/course/starbook/learn-word-overview"},"next":{"title":"5.3.\u8BBE\u7F6E\u638C\u63E1\u7A0B\u5EA6","permalink":"/en/course/starbook/learn-word-set-level"}}'),i=r("785893"),o=r("250065");let s={hide_title:!0,slug:"/course/starbook/learn-word-rand",keywords:["GoFrame","API","\u968F\u673A\u5355\u8BCD","\u5355\u8BCD\u67E5\u8BE2","GoFrame\u6846\u67B6","\u5206\u9875\u5217\u8868","\u63A5\u53E3\u8BBE\u8BA1","\u7F16\u7A0B\u903B\u8F91","\u63A5\u53E3\u6D4B\u8BD5","\u5355\u8BCD\u5217\u8868"],description:"\u4F7F\u7528GoFrame\u6846\u67B6\u8BBE\u8BA1\u968F\u673A\u83B7\u53D6\u5355\u8BCD\u63A5\u53E3\u3002\u63D0\u4F9B\u8DEF\u5F84words/rand\u7684API\uFF0C\u652F\u6301\u57281\u5230300\u4E4B\u95F4\u9650\u5236\u83B7\u53D6\u5355\u8BCD\u4E2A\u6570\u3002\u4F7F\u7528OrderRandom\u5B9E\u73B0\u968F\u673A\u67E5\u8BE2\uFF0CLimit\u9650\u5236\u67E5\u8BE2\u8FD4\u56DE\u6570\u91CF\u3002\u63A7\u5236\u5668\u8C03\u7528\u903B\u8F91\u5904\u7406\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5E76\u8FDB\u884C\u63A5\u53E3\u6D4B\u8BD5\u4EE5\u9A8C\u8BC1\u529F\u80FD\u3002"},d=void 0,l={},a=[{value:"\u6DFB\u52A0Api",id:"\u6DFB\u52A0api",level:2},{value:"\u7F16\u5199Logic",id:"\u7F16\u5199logic",level:2},{value:"Controller\u8C03\u7528Logic",id:"controller\u8C03\u7528logic",level:2},{value:"\u63A5\u53E3\u6D4B\u8BD5",id:"\u63A5\u53E3\u6D4B\u8BD5",level:2}];function c(n){let e={blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u968F\u673A\u83B7\u53D6\u82E5\u5E72\u5355\u8BCD\u4E0E\u83B7\u53D6\u5355\u8BCD\u5206\u9875\u5217\u8868\u5927\u540C\u5C0F\u5F02\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6CA1\u6709\u5206\u9875\u67E5\u8BE2\uFF0C\u8F6C\u800C\u4F7F\u7528\u968F\u673A\u67E5\u8BE2\uFF1B"}),"\n",(0,i.jsx)(e.li,{children:"\u6CA1\u6709\u6A21\u7CCA\u67E5\u8BE2\uFF1B"}),"\n",(0,i.jsx)(e.li,{children:"\u8FD4\u56DE\u7684\u6570\u636E\u57FA\u672C\u4E00\u81F4\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6DFB\u52A0api",children:"\u6DFB\u52A0Api"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"api/words/v1/learn_words.go"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package v1  \n  \nimport (  \n    "github.com/gogf/gf/v2/frame/g"  \n    "star/internal/model"\n)  \n  \ntype RandListReq struct {  \n    g.Meta `path:"words/rand" method:"get" sm:"\u968F\u673A\u83B7\u53D6\u5355\u8BCD\u5217\u8868" tags:"\u5355\u8BCD"`  \n    Limit  uint `json:"limit" v:"between:1,300" dc:"\u9650\u5236\u4E2A\u6570\uFF0C\u9ED8\u8BA450"`  \n}  \n  \ntype RandListRes struct {  \n    List []List `json:"list"`  \n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"RandListReq"}),"\u63D0\u4F9B",(0,i.jsx)(e.code,{children:"Limit"}),"\u5B57\u6BB5\uFF0C\u8868\u793A\u60F3\u8981\u83B7\u53D6\u7684\u4E2A\u6570\uFF0C\u8303\u56F4\u5728",(0,i.jsx)(e.code,{children:"1-300"}),"\u3002",(0,i.jsx)(e.code,{children:"RandListRes"}),"\u4F7F\u7528\u4E0E\u5355\u8BCD\u5206\u9875\u5217\u8868\u4E00\u6837\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u4F46\u662F\u5C11\u4E86",(0,i.jsx)(e.code,{children:"Total"}),"\u5B57\u6BB5\u3002"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"words/rand"}),"\u662F\u4E00\u79CD\u7CBE\u786E\u5339\u914D\uFF0C\u5B83\u7684\u4F18\u5148\u7EA7\u8981\u9AD8\u4E8E\u5355\u8BCD\u8BE6\u60C5\u63A5\u53E3\uFF1A",(0,i.jsx)(e.code,{children:"words/{id}"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u7F16\u5199logic",children:"\u7F16\u5199Logic"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"internal/controller/words/words_v1_rand_list.go"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package words  \n  \nimport (  \n    "context"  \n  \n    "github.com/gogf/gf/v2/errors/gerror"\n    "star/internal/dao"\n    "star/internal/model"\n    "star/internal/model/entity"\n)  \n  \n// Rand \u968F\u673A\u82E5\u5E72\u83B7\u53D6\u5355\u8BCD  \nfunc Rand(ctx context.Context, uid, limit uint) ([]entity.Words, error) {  \n    if limit <= 0 {  \n       limit = 50  \n    }  \n    var (  \n       list = make([]entity.Words, limit)  \n       err  error  \n    )  \n    db := dao.Words.Ctx(ctx)  \n    if uid > 0 {  \n       db = db.Where("uid", uid)  \n    }  \n  \n    err = db.Limit(int(limit)).OrderRandom().Scan(&list)  \n    return list, err  \n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"OrderRandom"}),"\u662F",(0,i.jsx)(e.code,{children:"GoFrame ORM"}),"\u63D0\u4F9B\u7684\u968F\u673A\u67E5\u8BE2\u65B9\u6CD5\uFF0C",(0,i.jsx)(e.code,{children:"Limit"}),"\u65B9\u6CD5\u7528\u4E8E\u9650\u5236\u67E5\u8BE2\u4E2A\u6570"]}),"\n",(0,i.jsx)(e.h2,{id:"controller\u8C03\u7528logic",children:"Controller\u8C03\u7528Logic"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"internal/logic/words/learn_words.go"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package words  \n  \nimport (  \n    "context"  \n  \n    "star/api/words/v1"\n    "star/internal/logic/users"\n    "star/internal/logic/words"\n    "star/internal/model"\n)  \n  \nfunc (c *ControllerV1) RandList(ctx context.Context, req *v1.RandListReq) (res *v1.RandListRes, err error) {  \n    uid, err := users.GetUid(ctx)  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    wordList, err := words.Rand(ctx, uid, req.Limit)  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    var list []v1.List  \n    for _, v := range wordList {  \n       list = append(list, v1.List{  \n          Id:               v.Id,  \n          Word:             v.Word,  \n          Definition:       v.Definition,  \n          ProficiencyLevel: model.ProficiencyLevel(v.ProficiencyLevel),  \n       })  \n    }  \n  \n    return &v1.RandListRes{  \n       List: list,  \n    }, nil  \n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u63A5\u53E3\u6D4B\u8BD5",children:"\u63A5\u53E3\u6D4B\u8BD5"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u51C6\u5907\u4E00\u4E9B\u6D4B\u8BD5\u6570\u636E\u5E76\u6D4B\u8BD5\uFF0C\u8FD9\u91CC\u4E3A\u4E86\u8282\u7701\u7BC7\u5E45\u5C31\u4E0D\u518D\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'$ curl -X GET http://127.0.0.1:8000/v1/words/rand \\\n     -H "Authorization: eyJhbGci...5U" \\\n     -H "Content-Type: application/json" \\\n\n{\n\xa0 \xa0 "code": 0,\n\xa0 \xa0 "message": "",\n\xa0 \xa0 "data": {\n\xa0 \xa0 \xa0 \xa0 "list": [\n        \xa0 \xa0 ...\n\xa0 \xa0 \xa0 \xa0 ]\n\xa0 \xa0 }\n}\n'})})]})}function u(n={}){let{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},250065:function(n,e,r){r.d(e,{Z:function(){return d},a:function(){return s}});var t=r(667294);let i={},o=t.createContext(i);function s(n){let e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);